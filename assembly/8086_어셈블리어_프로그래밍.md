# 8086 어셈블리어 프로그래밍

참조: http://www.w3ii.com/ko/microprocessor/microprocessor_8086_instruction_sets.html

## 1. 상수
* 2진수: 상수 뒤에 b를 붙인다
* 8진수: 상수 뒤에 O(대문자) 나 q를 붙인다
* 10진수: 상수 그대로 쓰거나 d를 붙인다
* 16진수: 상수 뒤에 h 나 H를 붙인다. abcH일 경우 0abcH라고 해주어야 한다.
* 부동소수점: ex).427E-3=0.000427
* 문자/문자열 상수: 작은따옴표나 큰따옴표로 감싸준다.

## 2. 명령어
* ; : 주석
* MOV 레지스터, 값 : 레지스터에 값을 부여
* XCHG 레지스터1, 레지스터2 : 레지스터 값을 서로 교환, 8비트와 16비트간에는 교환X
* INC 레지스터 : 레지스터 값을 1증가
* DEC 레지스터 : 레지스터 값을 1감소
* ADD 오퍼랜드1, 오퍼랜드2 : 오퍼랜드1=오퍼랜드1+오퍼랜드2

### 2-1. 분기
* CMP 오퍼랜드1, 오퍼랜드2 : 같은 크기의 숫자 사이를 비교한다. 오퍼랜드1-오퍼랜드2를 해서 플래그 레지스터를 변경한다.

#### 2-1-1. 조건 분기: 비교명령이나 연산 명령에 의해 세팅된 플래그 레지스터(FR)의 값에 따라 분기된다.
`Jcc 기호`
표 추가하기

#### 2-1-2. 무조건 분기
명령어 쓰기

##### cc에 올 수 있는 문자
* 부호가 없는 경우: A(크다), B(작다)
* 부호가 있는 경우: G(크다), L(작다), E(같다), N(~가 아니다), O(오버플로우), P(패리티), S(부호음수), Z(호은 같음)

## 3. 지시어
지시어는 기계어로 번역되지 않고 단지 어셈블러에게만 명령을 지시한다.

### 3-1. 기호 상수
* 레이블 EQU 상수(식) : 재정의 불가, 기호상수, C언어로 치면 #define
* 레이블 = 상수(식) : 재정의 가능

### 3-2. 변수 정의: 프로그램은 변수를 위하여 기억 장소를 미리 확보한다.
* [레이블] DB 식[,반복 시 배열] : 1바이트(8bit)
* [레이블] DW 식[,반복 시 배열] : 1워드(16bit)
* [레이블] DD 식[,반복 시 배열] : 2워드(32bit)
* [레이블] DQ 식[,반복 시 배열] : 4워드(64bit)
* [레이블] DT 식[,반복 시 배열] : 10바이트(80bit)
* 식 중에 ?는 null과 비슷한듯
* 레이블 없이 저장 가능

ex) A DB 'a', 0BFH ; A='a', 0BFH를 저장하는 배열

프로그램출력지시어 넘어갔다

### 3-3. 영역 정의 지시어
* MAIN SEGMENT : MAIN을 세그먼트의 이름으로 한다.
* ASSUME CS:MAIN : 코드세그먼트에 MAIN의 주소를 넣는다.
* MAIN ENDS : 세그먼트의 끝
* END : 프로그램의 끝

## 4. 인터럽트
#### INT 21H : AH레지스터에 들어 있는 값에 따라 각기 다른 기능을 수행
- AH==2 : 2가 들어있으면 DL레지스터에 저장되어 있는 코드를 화면상에 출력
- AH==4C : 4C가 들어있으면 프로그램을 끝내고 DOS상으로 돌아간다

## 5. 매크로 지시어
매크로는 반복되는 일련의 명령어들을 한 줄로 간략하게 표현하는 것이다. 프로그램이 어셈블될 때 단순히 치환하는 역할을 한다.

### 5-1. 선언
	매크로명 MACRO 매개변수
	로직
	ENDM

### 5-2. 호출
`매크로명 인자`

### 5-3. 매크로 프로세서
원시프로그램에서 매크로 호출을 읽어 매크로 로직을 치환하고 확장된 원시프로그램을 만든다.

### 5-4. 조건부 매크로 확장
* IF문 사용, 조건결과가 0이 아니면 참
* IFE문 사용, 조건결과가 0이면 참